- implement enemy generators
== that'll be good for a checkpoint release
- ending for ladybug (dream sequence to ladybug pic to "I wonder what she's dreaming of?")
- ending for gnat ("I'm the greatest!" to zoom out, too tiny on stage, celebration banner, but officials look confused about where he is, "Can't anyone hear me?!")
- ending for Snowball
- ending for cruiser

VRAM map (except for ending scroll)
--------
 >0000	Screen Image Table
 >0300	Sprite Descriptor Table
 >0380	Color Table
 >03A0	(Unused)
 >03C0	Color Table 2 (all white on transparent)
 >03E0	(Unused)
 >0800	Sprite Pattern Table
 >1000	Pattern table (scroll 0)
 >1800	Pattern table (scroll 2)
 >2000	Pattern table (scroll 4)
 >2800	Pattern table (scroll 6)
 >3000	Screen Image Table 2 (maybe?)
 >3300	(unused)
 >3D00	wraparound memory overwritten by boss draw code

SPRITE PATTERNS
---------------
0-3		- enemy type 1 (saucer)
4-7		- enemy type 2 (jet)
8-11	- enemy type 3 (mine)
12-27	- enemy type 4 (helicopter - 4 frames)
28-43	- enemy type 5 (swirly - 4 frames)
44-47	- enemy type 6 (bomb)
48-51	- jet tilt left
52-75	- enemy explosion (6 frames)
76-83	- Boss engine (2 frames) / electric wall left/right edges
84-87	- enemy shot
88-91	- pulse cannon small
92-95	- pulse cannon medium
96-99	- pulse cannon big
100-103 - player flame
104-107	- electric wall beam left
108-123 - player ship straight
124-139 - player shield straight
140-155	- player ship left
156-171	- player shield left
172-187	- player ship right
188-203	- player shield right
204-207 - mine 'tips'
208-211 - 3 way straight
212-215 - 3 way left 1
216-219 - 3 way left 2
220-223 - 3 way right 1
224-227 - 3 way right 2
228-231 - electric wall beam right (also used for boss cockpit)
232-247 - helicopter leaving (4 frames)
248-251	- powerup and player explosion (copied from character patterns, not initialized)
252-255 - jet tilt right

CHARACTER PATTERNS
------------------
0-7		- star patterns (1 pixel movement)

--red--
8-12	- explosion animation
13-15	- (unused)
--end red--

-- colored for lives counter --
16		- shield powerup
17		- pulse wave powerup
18		- 3 way powerup
19		- small snowball ship (lives)
20		- small ladybug ship (lives)
21		- small gnat ship (lives)
22-23	- (unused)
-- end colored for lives counter --

24-31	 - (unused)

32-120	- ASCII Character set (  `=copyright, [=Y, \=Z  )
121-255	- boss pattern (last 7 chars of ASCII stolen - this makes 'x' boss colored and steals 'y,z')

SPRITES
-------
0-3 		- Player ship
4 			- powerup
8-16		- enemies + shots
17 			- player flame
18-21 		- player shield
22-30 		- player shots
31			- mine tips

Secret Game Modes
-----------------

Hold fire when moving left and right to access the ships GNAT and PRINCESS
	-GNAT is tiny and has only a single gun with no powerups (game mode '1' on score last digit)
	-PRINCESS has fully powered homing shots but has only one life (game mode '2' on score last digit)

Hold DOWN when selecting SNOWBALL for cloaked enemy mode (game mode '3' on score last digit)

Hold UP when starting for cheat mode. You are invincible, plus each key does something different in cheat mode:
	0 - no shields
	2 - add shields
	3 - add life
	4 - warp to boss
	5 - increment powerup (loops)
	7 - kill boss
	8 - disable cheats
(Game mode '9' on score last digit)

Press '*' on the difficulty screen for music test

Interesting gotcha: Ladybug, once it has shields, extends the shields with collisions, so bosses that drop mines 
can essentially give it infinite shields (till the mines stop). That really helps on the final boss, once you know it!

Conversely, the gnat is too weak to do much against boss mines, so really needs to rely on dodging

Game Modes:
0	-	cruiser
1	-	snowball
2	-	ladybird
3.1	-	gnat
4.2	-	princess
5.3	-	cloaked enemies
6
7
8
9	-	cheat mode

==============================================================================

distns: counts DOWN. Adds 100 when you die, so could technically be higher!
	1200
	1400
	1600
	1800
	2000
	
Vertical speeds:			Closest spacing (if on same column)
	
saucers: 	4 pixels		5 rows
jets:		8				2 rows
mines:		2 pixels		8 rows
heli:		4				5 rows
beamgen:	2				24 rows (extra spacing)
swirly:		5				4 rows
bomb:		3				12 rows (extra spacing)

Generators can produce the enemies psuedo randomly. In fact, with a separate seed I can use the same random
number code, but lock it down to the stage. If I seed each stage the same way each time, I will get the same
patterns - however, there is the small issue of dying and rolling back. 

To solve this -- generators are checked every 50 units. The random number seed is the level*32+distance/64. 
This guarantees the same generator at the same point (dying may still throw off the sequence slightly, but 
it should fall back into line.) Multiple generators should be staggered so they don't all trigger at the
same time.

There is 1 generator per stage up to a max of 3. A generator has a horizontal position, a horizontal speed, 
a dispatch timer, a dispatch count, and a dispatch type.

The timer is adjusted based on the speed and the type such that it is always the number of cells away before
dispatching again. This basically means setting a minimum when the generator is created.

Creating a generator:
-set random seed (probably doesn't matter if we use the global seed, it will boil down to shots and powerups now)
-horizontal starting position is random
-horizontal speed is random but should be weighted to low values. Must be signed. Full range is legal (large 
 jumps will look random), so will need a simple way to weight it closer to zero.
-dispatch timer starts with the table above. For each 16 pixels in the speed, can subtract one. Then add a 
 small random value to get a slope.
-Count is random. 6 enemies is the most onscreen at a time so maximum should not be much more than that.
-type is dependent on level, but otherwise random

Updating a generator:
-if enemies remain:
	-update position - no need to check for wrap
	-countdown timer
	-if timer expires, create new enemy (if possible - depends on difficulty and what's already out)
	-countdown number of enemies (whether created or not)

At each checkpoint (staggered generators):
-if enemies is zero, re-create generator

==============================================================================
-Give Luna a horizontal screen wrap like that Touhou game (either double-tap, or just always ;) )

Want to redo stages to be a little more impressive.

Stage 1 - Space - include typical space base underneath
Stage 2 - Earth - Fly over a rocky moon-like base - impact craters and the like
Stage 3 - Air   - Dive into a gas giant - multicolored clouds with parallax beneath
Stage 4 - Fire  - Over the boiling surface of a star - lots of reds and yellows
Stage 5 - Water - Over an ocean, breakers and occasional islands to break up the scenery

Some minor F18A enhancements would be nice too. I was thinking extra particles from explosions and using the
bitmap layer for colored (and far more easily positioned) bosses. Will require a separate boss program for
F18A and maybe a pre-frame stub program for the special effects.

Note the TI bank switching has no fixed bank like the Coleco. To that end, we might try to put the GCC runtime in a 
fixed location in /every/ TI bank to ge the same effect of runtime being available. That will make the banking even 
trickier, but I think it's fact of life. I'll have to figure it out. (Alternative, use 32k and put it there.)

Music that I have from RushJet:

bossIX			Replacement for "air" level 3
				
driven			Good for "space" level 1

evilboss2		Might be good for an attract mode animation.				

freekd			feels incomplete

gameover		feels good for a win animation

informant		Good for "air" level 3 - NO?

insurmountable	A little repetitive

invasion		Good for "earth" level 2

lets kill the	kind of buzzy

mystery			Good for "water" level 5

oddity			Good for "fire" level 4

select			very short... loop for 'game start' animation

storm			boss music

teckni			very 'beepy'.. has parts that are okay, but not sure it fits

what			ending music

(recapping)												Size (bytes as SPF)		Duration
-title page 			(no music)						   0
-attract mode anim		evilboss2						6220	bank4			76.8 s
-game start anim		select							 498	bank4			 4.2 s
-fly-to animation		freekd (truncated/faded out)	3000					43.2 s
-Space Stage 1			driven							3598	bank5			60.8 s
-Asteroid stage 2		invasion						3480	bank5			37.3 s
-Gas giant stage 3		bossIX							7164	bank6			70.4 s
-Fire star stage 4		oddity							3254	bank2			45.3 s
-Water world stage 5	mystery							6782	bank6			97.6 s
-Boss					storm							3826	bank3			73.6 s
-Stage complete			Sound effect (same as today) 	   0	n/a				 3.0 s
-win animation			gameover						 982	bank5			32.0 s
-Win scroll				what							3626	bank3			64.0 s
-Game over				my original game over tune		 350	bank4			 6.4 s

VGMComp 2 version:

    OutFile00.sbf:  bossIX			70.383s		7172 bytes
                    tursi_gameover	 6.383s
                    gameover		31.983s
                    
    OutFile01.sbf:  driven			60.783s		7092 bytes
                    what			63.983s
                    oddity			45.316s
                    
    Outfile02.sbf:  invasion		37.316s		6176 bytes
                    storm			73.583s
                    
    Outfile03.sbf:  mystery			97.583s		6768 bytes
    
Packed Total: 27,208 bytes

Stage 1 is 35 seconds long, roughly, with a length of 600. So a second is about 17.143 distns.
Stage 1, driven, 60.783s, should be 1042
Stage 2, invasion, 37.316, should be 640
Stage 3, boxxIX, 70.383, should be 1207
Stage 4, oddity, 45.316, should be 777
Stage 5, mystery, 97.585, should be 1673

Rushjet has a patreon now: http://patreon.com/rushjet1

TODO:
-- add intersital animations flying to a planet - every other stage on a planet level:
       space, jungle, space, water, space, [secret warp stage?]

-If I need another music for ending music - the stage 1 music sounds /awesome/ at 50% speed ;)
-Sound effects for events in game (hit nuke, nuke goes off, hit boss armor, hit boss engine, fire wide, fire beam level 1, 2, 3)
-sfx via AY sound chip if available?
-music toggle (when off, sfx only, through SN)
-“use the force” like in Star Wars arcade. At the start of every level, force is set to TRUE. If you fire, force is set to FALSE. During the boss, you CAN fire, 
 but if any shot leaves the top of the screen or hits a mine then force is set to FALSE. If you destroy the boss and force is still TRUE, then you get 
 “10,000 FOR USING THE FORCE” (10,000 * boss level)
-Ground on levels after the first (air (clouds), earth, water, fire? see what works with bosses)
-F18A alternate version (better sprite graphics at least)
